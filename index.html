<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=7">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>

  <meta property="og:title" content="on the now">
  <meta property="og:description" content="on the now">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">

  <link rel="stylesheet" href="index.css">

  <title>on the now</title>
  <link rel="icon" type="image/png" href="on%20the%20now.png">
</head>
<body>

<h1 id="title">idk</h1>

<script>
    const title = document.getElementById('title');
    const MAX_CHARS_PER_LINE = 35;
    const MAX_LINES = 4;

    function formatText(text) {
        text = text.slice(0, MAX_CHARS_PER_LINE * MAX_LINES);
        let lines = [];
        for (let i = 0; i < text.length; i += MAX_CHARS_PER_LINE) {
            lines.push(text.slice(i, i + MAX_CHARS_PER_LINE));
        }
        return lines.join('\n');
    }

    function updateFontAndStroke() {
        const textLength = title.textContent.replace(/\n/g, '').length || 1;

        const fontSize = Math.max(200 - (textLength - 1) * 10, 40);
        title.style.fontSize = fontSize + 'px';

        title.style.webkitTextStroke = (fontSize * 0.1) + 'px black';
    }

    function updateHash() {
        location.hash = encodeURIComponent(title.textContent.replace(/\n/g, ' '));
    }

    function setText(newText) {
        title.textContent = formatText(newText);
        updateFontAndStroke();
        updateHash();
    }

    if (location.hash.length > 1) {
        setText(decodeURIComponent(location.hash.slice(1)));
    } else {
        updateFontAndStroke();
    }

    document.addEventListener('keydown', (e) => {
        const cleanText = title.textContent.replace(/\n/g, '');
        if (e.key.length === 1) {
            setText(cleanText + e.key);
        } else if (e.key === 'Backspace') {
            setText(cleanText.slice(0, -1));
        }
    });
</script>
</body>
</html>
